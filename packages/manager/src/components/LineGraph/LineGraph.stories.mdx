import { LineGraph } from 'src/components/LineGraph/LineGraph';
import { Canvas, Meta, Story, ArgsTable } from '@storybook/addon-docs';
import { TransferHistory } from 'src/features/Linodes/LinodesDetail/LinodeNetworking/NetworkingSummaryPanel/TransferHistory';

export const data = [
  [1644330600000, 0.45],
  [1644330900000, 0.45],
  [1644331200000, 0.46],
  [1644331500000, 0.46],
  [1644331800000, 0.45],
  [1644332100000, 1.11],
  [1644332400000, 1.11],
  [1644332700000, 0.48],
  [1644333000000, 0.57],
  [1644333300000, 0.66],
  [1644333600000, 0.46],
  [1644333900000, 0.45],
  [1644334200000, 0.45],
  [1644334500000, 0.46],
  [1644334800000, 0.46],
  [1644335100000, 0.45],
  [1644335400000, 0.44],
  [1644335700000, 0.46],
  [1644336000000, 0.46],
  [1644336300000, 0.45],
  [1644336600000, 0.45],
  [1644336900000, 0.46],
  [1644337200000, 0.45],
  [1644337500000, 0.47],
  [1644337800000, 0.63],
  [1644338100000, 0.26],
  [1644338400000, 0.45],
  [1644338700000, 0.45],
  [1644339000000, 0.46],
  [1644339300000, 0.46],
  [1644339600000, 0.45],
  [1644339900000, 0.45],
  [1644340200000, 0.46],
  [1644340500000, 0.45],
];

<Meta title="Components/Analytics & Graphs/Graphs" component={LineGraph} />

# ðŸ“ˆ Graphs

- **Chart.js** is the charting tool we use for analytics shown on the Linode detail page
- Keep charts compact
- When selecting a chart color palette make sure colors are distinct when viewed by a person with color blindness
  - Test the palette with a checker such as the [Coblis â€” Color Blindness Simulator](https://www.color-blindness.com/coblis-color-blindness-simulator/)

export const Template = (args) => <LineGraph {...args} />;

<Canvas>
  <Story
    name="Default"
    args={{
      data: [
        {
          label: 'CPU (%)',
          borderColor: 'transparent',
          backgroundColor: 'rgba(54, 131, 220, 0.7)',
          data,
        },
      ],
      showToday: true,
      nativeLegend: false,
      timezone: 'America/New_York',
      unit: '%',
      accessibleDataTable: {
        display: true,
        unit: '%',
      },
      chartHeight: undefined,
      suggestedMax: undefined,
      rowHeaders: undefined,
      legendRows: undefined,
    }}
    argTypes={{
      data: {
        description:
          'The data point to plot on the line graph that should be of type `DataSet`',
        type: { name: 'DataSet', required: true },
      },
      showToday: {
        description:
          'Determines whether dates or times are shown on the x-axis and also deturminds the x-axis step size',
        type: { name: 'boolean', required: true },
      },
      nativeLegend: {
        description: 'Show the native **Chart.js** legend',
        table: {
          defaultValue: {
            summary: false,
          },
        },
      },
      timezone: {
        description:
          'The timezone the graph should use for interpreting the UNIX datetimes in the data set',
        table: {
          defaultValue: {
            summary: 'UTC',
          },
        },
      },
      unit: {
        description: 'The unit to add to the mouse-over tooltip in the chart',
        type: { name: 'string' },
        table: {
          defaultValue: {
            summary: 'undefined',
          },
        },
      },
      chartHeight: {
        description: 'The height in `px` of the chart\n`number`',
        type: { name: 'number' },
        table: {
          defaultValue: {
            summary: 'undefined',
          },
        },
      },
      suggestedMax: {
        description:
          'The suggested maximum y-axis value passed to **Chart,js**\n`number`',
        type: { name: 'number' },
        table: {
          defaultValue: {
            summary: 'undefined',
          },
        },
      },
      rowHeaders: {
        description: 'Row headers for the legend',
        table: {
          defaultValue: {
            summary: 'undefined',
          },
        },
      },
      legendRows: {
        description: 'Legend row labels that are used in the legend',
        table: {
          defaultValue: {
            summary: 'undefined',
          },
        },
      },
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Default" sort="requiredFirst" />

## Example

---

### Linode Network Transfer History

<Canvas>
  <Story name="Example">
    <TranferHistory linodeID={0} linodeCreated="2022-02-08T14:14:57" />
  </Story>
</Canvas>
