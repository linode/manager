import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';
import Button from 'src/components/Button';
import DismissibleBanner from './DismissibleBanner';
import Grid from 'src/components/Grid';
import Link from 'src/components/Link';
import Typography from 'src/components/core/Typography';

<Meta
  title="Components/Notifications/Dismissible Banners"
  component={DismissibleBanner}
/>

# Dismissible Banners

### Usage

Banners appear between the top nav and page content and are a visual interruption of the normal page layout. Their use must be approved by all project stakeholders.

### Design

- Banners are dismissible using an &rsquo;X&rsquo; icon.
- Consider adding a link to a doc or a guide for users to learn more.
- Banners should be considered as one part of a larger communications plan; messaging should be developed with the marketing team.

### Variants

Under the hood, banners use the [Notice](/docs/components-notifications-notices--success) component so they have the same variants such as:

- Success: Informs users of a new feature or improved service.
- Warning: Informs users of an impending change that will have an impact on their service(s).
- Call to action: Primary Button or text link allows a user to take action directly from the banner.

export const DismissibleBannerTemplate = (args) => {
  return (
    <DismissibleBanner
      {...args}
    >
      <Typography>This is an example of a dismissible banner.</Typography>
    </DismissibleBanner>
  );
};

export const CallToActionBanner = () => {
  return (
    <DismissibleBanner
      preferenceKey="cluster-v1"
      success
    >
      <Grid
        container
        direction="row"
        alignItems="center"
        justifyContent="space-between"
      >
        <Grid item>
          <Typography>
            A new version of Kubernetes is available.
          </Typography>
        </Grid>
        <Grid item>
          <Button onClick={() => null} buttonType="primary">
            Upgrade Version
          </Button>
        </Grid>
      </Grid>
    </DismissibleBanner>
  )
}

export const StatusBannersTemplate = (args) => {
  const { message, title, status, impact, href } = args;
  return <StatusBanners {...args} />;
};

export const BetaBanner = () => {
    return (
      <DismissibleBanner preferenceKey="beta-banner" success>
        <Typography>
          Managed Database for MySQL is available in a free, open beta period
          until May 2nd, 2022. This is a beta environment and should not be
          used to support production workloads. Review the{' '}
          <Link to="https://www.linode.com/legal-eatp">
            Early Adopter Program SLA
          </Link>
          .
        </Typography>
      </DismissibleBanner>
  );
}

#### Beta Banner

Beta banners, along with [beta chips](/docs/elements-chips-beta-chips--default-story), provide notice to users about beta features.

<Canvas>
  <Story name="Beta Banner">
    {BetaBanner.bind({})}
  </Story>
</Canvas>

#### Call to Action Banner

<Canvas>
  <Story name="Call to Action Banner">
    {CallToActionBanner.bind({})}
  </Story>
</Canvas>

### Component API

<Canvas>
  <Story
    name="Dismissible Banners"
    argTypes={{
      preferenceKey: {
        description:
          'String used to check if the banner has already been dismissed.',
      },
    }}
  >
    {DismissibleBannerTemplate.bind({})}
  </Story>
</Canvas>

#### Beta

Beta banners, along with [beta chips](/docs/elements-chips-beta-chips--default-story), provide notice to users about beta features.

<Canvas>
  <Story name="Beta Banners">
    {BetaBanner.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Dismissible Banners" exclude={['className']} sort="requiredFirst" />
