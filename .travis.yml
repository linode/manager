language: node_js
node_js:
    - "6"
addons:
    firefox: "latest"
before_script:
    - "export DISPLAY=:99.0"
    - "sh -e /etc/init.d/xvfb start"
    - sleep 3 # give xvfb some time to start
script:
    - |
        cat <<EOF > src/secrets.js
        export const clientId = 'placeholder';
        export const clientSecret = 'placeholder';
        EOF
    - npm test
    - cat ./coverage/lcov.info | ./node_modules/.bin/coveralls
    - npm run lint
