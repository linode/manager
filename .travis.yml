sudo: required
language: node_js
node_js:
  - 8.11.2

cache: yarn
# services:
  # - docker

before_install: sudo apt-get install libcairo2-dev libjpeg8-dev libpango1.0-dev libgif-dev
  build-essential g++ google-chrome-stable curl
install:
- yarn --frozen-lockfile
before_script:
- yarn storybook &
script:
- yarn build
- yarn test --coverage --maxWorkers=2
- yarn storybook:e2e
- 'pkill -f selenium-standalone || :'
- pkill -f storybook
- cat ./coverage/lcov.info | ./node_modules/.bin/coveralls
env:
  - secure: aV/fYqDjHMTEUuwxk9EM8n7duFPMvgB8ywvTB7x5iGDQ9958EvM0i6BWGJ30hRRbdx6Nklnn8puXctKAE7sNlI/jsyuaXNSycFeS8R7ItDeDKiEG5jRKEzoLJ5NkCdSThY/w31sw88EZlAdJZ7olHz6v91XDhHdqLrtDChPADQPf5/EF5hja+EeX3H6vXGuo5CxctUtQMr4xkuXL4i8+oR5X7sOFMy2++ZpdwoX3JtX/bYxGzokTbzv7HH4YK0WKyZZpUFyC/YVP2pxw/YjLTS2kyLBfoMuFjCYojhbgwKiQyb0XrE028Dc5TGPbd01xZdmiZ3lnd4HAZhanEBCnVoKbOXdejZjo007QZrkInWGTM4nqsz+OegnMrxdaaLZmXdQ4F+Tt9SmPlKVIsHwQAqzXGeC/WkykWF4qazRumKmlJgYXogPlqCFbh8O0Y7sAGysNNRDx6/7DGVKBq8oD+iTbTFPwPWCTy7m6tuesyHww0F1r/QN4fbpyEEneCRy+kPgWfAF5nj+SJO6Ajm710xxoelvQpjJpd9wsQIWV61cy2wwcifk+V3W24KdZZBqm746Tr7XzbqdRFWyzWbevdUAxhkkXjrOevP+UZYAs3o4iFjWQ1Sh4jANOCYHdvrc+EbjRd8rdTfGwRqsgdYLFMbwiJca/NfZbmLlaRTClBvI=
  - secure: WE+zKI4u2W7mWb+NaEnu+++6NKinbp0hVwqRm5rBcFBuzw7esj0XbWiCYIZImfGG/p8fOpxTjinqFxmcuntbkyF/05vbnpkIGPB0BkxvtLYCyT+t+UsT1L1v1yZeXDJrmkuLL6jisZ8spmwK3uPlq9DqQHkjUg2jiZwwRx38CNWP0F1JJQW9UeM86+uPjjBzuWIIHhHvI0yJBddrDgCDcLyZ387rp+aUusQmSvDspUS3JkpMuj41mZjhMF9RQ2yEMjjkQmWkQLhPXC9pw1pTG0qxLL34rLkf/f6MzO/h/FN6Eby8MttkXvwZ2g5jtmy8k6kFI/P4jjUx/CaurtLLuQvnqrsaKyRNdo2/K8yVsM+2nd18ChT7xC3Gz0XJcVe1Pe/QKkomgiT9zobFEROGKgarnWZhLZKq/StznMpsjtT8nBgYN14VIH9U8acNZXNWg8ZJq0wSWB7EVSc+YgX6cFxYkMyqMHjs3CHWA3FNqcIXvJgk9MGeb8MUwUsJ4oKaTpoP3F8aoY8ANaEOy+5oLiNgoXIh3jFmLkXfGabI4MvsClZb72onKlJs8WD7VkusgVOrcReD1vkAMv7caaO4TqkMAAuShXiks2oFI5lpHSz0AE1BaI1s6YvwHQFlxbSQJprJd4eeWS9l78mYPJhoLRaWbvf0qIJ29mDSAgAJ7XI=
  - secure: B1EK0eRrAPJw/4UnR6aD24MTriMFJrq46vwTiI3sWw8Rfwf40APgH2/FmghRnWObHZWOkcnc0X1z0X7EHv+YVy7LjcnVsm3EGfBaFBZZ6Wt1+mumvsaZybzTMtcBhX0ZncXpK42+5bsFBQuWFjcY5VPbSadkdr9xY8Rz65yLgcw/bAlNThmgo2O+HDgyyRMeKYwhEYpDC6tbaKSsWmZwqpV5ISea497QGVf6CAAbOa0XZubDkWDDUrQBaH0mGjKCs2wlMltbzNR09rvvX2laCR9tOWRBqvqRFUs0XsaeXyAoWGZ6NPLTkxsHMyiPcDGWcx62Y3piOTGRuP6nq2WM5pDN8mU29GPFhHq8uX+k/zWdsEjFquQAqrTzq4uTaCxypN1HPipt7mhlfMLsFDwJ/+DdOL9klysx3R+CMlfKiKzRiieK4l4HjYGibfYJSkterrWYpw3Bupvqh7WOu6DenR/QjXi+OYQ3Xozw3IzwjChog4e7/vkPOvyiA+hlWILxv3OpSH8PHHUOrp8siTAPW/H6nTMyW4CFAahpuT/eljWYc/9LDg7aruo3dH8QbXlmv90+gIkvbVTD7Yh620H7XtPqQ6zn8WV7YIb4kfkjWA37i5oFQcX78iy9IDD4lO9sYHSe8+Q67fq4bD04RMM2RJAS6OOYaBF1skYeJCblwUk=
