install:
    - curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -
    - echo "deb https://dl.yarnpkg.com/debian/ stable main" | tee /etc/apt/sources.list.d/yarn.list
    - apt-get update && apt-get install yarn
    - (cd components && yarn link)
    - yarn link linode-components && yarn
    - (cd docs && yarn link linode-components && yarn)
    - (cd components && yarn)
script:
    - set -e
    - |
        cat <<EOF > src/secrets.js
        export const clientId = 'placeholder';
        export const clientSecret = 'placeholder';
        EOF
    - |
      if [[ $(git diff HEAD^ $(git rev-parse --abbrev-ref HEAD) --name-only | grep -v scss) ]]; then
        yarn run lint
        (cd docs && yarn run lint)
        (cd components && yarn run lint)
        yarn test
        cat ./coverage/lcov.info | node ./bin/styleguideTestFilter.js | ./node_modules/.bin/coveralls
      fi
